<<<<<<< HEAD
"use strict";var modal=document.querySelector(".js-modal-backdrop"),form=document.querySelector("form"),inputLink=document.querySelector("input"),cards=document.querySelector(".cards"),element=document.querySelector("#card").innerHTML.trim(),template=Handlebars.compile(element);form.addEventListener("submit",addNewCard),cards.addEventListener("click",removeLink);var links=JSON.parse(localStorage.getItem(""));function addNewCard(e){e.preventDefault(),validateLink(inputLink.value)?fetchLink(inputLink.value).then(function(n){if(!links.some(function(e){return e.url===n.url}))return n?(links.unshift(n),void reloadInterface(links,cards)):void 0;openModal("Данная ссылка уже есть  в закладках!")}):openModal("Не валидная ссылка!")}function fetchLink(e){return fetch("https://api.linkpreview.net/?key=5cf192f15d69c372680a47ac1b06023127cc5830f0441&q="+e).then(function(e){if(e.ok)return e.json();throw openModal("Не валидная ссылка!"),new Error("Error while fetching: ".concat(e.statusText))}).then(function(e){return console.log(e),e}).catch(function(e){return console.log(e)})}function removeLink(e){if("remove"===e.target.dataset.action){var n=e.target.parentNode.querySelector("a").href;reloadInterface(links=links.filter(function(e){return e.url!==n}),cards)}}function reloadInterface(e,n){localStorage.setItem("",JSON.stringify(e)),n.innerHTML=template(e)}function openModal(e){modal.classList.remove("modal-hidden"),modal.innerHTML='<div class="modal-content">\n  <div class="close-btn" data-action="close-modal"></div>\n  <p class="modal-text">'.concat(e,"</p></div>"),modal.querySelector(".close-btn").addEventListener("click",closeModal)}function closeModal(){modal.classList.add("modal-hidden")}function validateLink(e){return/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:\/?#[\]@!\$&'\(\)\*\+,;=.]+$/.test(e)}null===links&&(links=[]),links&&(cards.innerHTML=template(links)),window.onclick=function(e){e.target==modal&&modal.classList.add("modal-hidden")};
=======
"use strict";var modal=document.querySelector(".js-modal-backdrop"),form=document.querySelector("form"),inputLink=document.querySelector("input"),cards=document.querySelector(".cards"),element=document.querySelector("#card").innerHTML.trim(),template=Handlebars.compile(element);form.addEventListener("submit",addNewCard),cards.addEventListener("click",removeLink);var links=JSON.parse(localStorage.getItem(""));function addNewCard(e){e.preventDefault(),validateLink(inputLink.value)?fetchLink(inputLink.value).then(function(n){if(!links.some(function(e){return e.url===n.url}))return n?(links.unshift(n),void reloadInterface(links,cards)):void 0;openModal("Данная ссылка уже есть  в закладках!")}):openModal("Не валидная ссылка!")}function fetchLink(e){return fetch("https://api.linkpreview.net/?key=5cf192f15d69c372680a47ac1b06023127cc5830f0441&q="+e).then(function(e){if(e.ok)return e.json();throw openModal("Не валидная ссылка!"),new Error("Error while fetching: ".concat(e.statusText))}).then(function(e){return console.log(e),e}).catch(function(e){return console.log(e)})}function removeLink(e){if("remove"===e.target.dataset.action){var n=e.target.parentNode.querySelector("a").href;reloadInterface(links=links.filter(function(e){return e.url!==n}),cards)}}function reloadInterface(e,n){localStorage.setItem("",JSON.stringify(e)),n.innerHTML=template(e)}function openModal(e){modal.classList.remove("modal-hidden"),modal.innerHTML='<div class="modal-content">\n  <div class="close-btn" data-action="close-modal"></div>\n  <p class="modal-text">'.concat(e,"</p></div>"),modal.querySelector(".close-btn").addEventListener("click",closeModal)}function closeModal(){modal.classList.add("modal-hidden")}function validateLink(e){return/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:\/?#[\]@!\$&'\(\)\*\+,;=.]+$/.test(e)}null===links&&(links=[]),links&&(cards.innerHTML=template(links)),window.onclick=function(e){e.target==modal&&modal.classList.add("modal-hidden")};
>>>>>>> 0b003e0e08ee7b5d1ef00787d58be5807daba6e2
